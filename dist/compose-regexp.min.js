/**@license MIT-compose-regexp.js-©Pierre-Yves Gérardy*/
!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define("compose-regexp",["exports"],n):(e="undefined"!=typeof globalThis?globalThis:e||self,n(e.composeRegexp={}))}(this,function(e){"use strict";function n(e){return e}function r(e){return-1===e.indexOf("\\")?e:JSON.parse('"'+e.replace(/$|"|\\x([\dA-Fa-f]{2})|\\u\{([\dA-Fa-f]{1,6})\}/g,function(e,n,r){return""===e?'"':'"'===e?'\\"':String.fromCodePoint(parseInt(n||r,16))}))}function t(){return"_"+Math.floor(Math.random()*Math.pow(2,32)).toString(36)}function u(e){return"\\"+String(e)}function i(e){return Object.assign(u.bind(null,e),{ref:!0})}function o(e){return"function"==typeof e&&e.ref}function f(){return{captureCount:null,direction:0,hasRefs:null,hasFinalRef:null,isDisjunction:null,isOneGroupOrAssertion:null,source:null,unicode:null}}function s(e){if(e instanceof Q){var n=X.get(e);return null==n&&X.set(e,n=f()),n}return e||f()}function c(e,n){return Object.defineProperty(function(r){var t=Y.get(r.key,e);return null!=t?t:Y.set(r.key,e,n(r))},"name",{value:e})}function a(e){return Y.get(e,"source")||Y.set(e,"source",e.source)}function l(e){function n(e){e.lastIndex=u.lastIndex,u=e}var t,u=ee;for(te.length=0,ee.lastIndex=0;t=u.exec(e);)if(u===ee)if("["===t[0])n(ne);else{if("."===t[0]||"[^]"===t[0]||null!=t[1]&&!re.test(r(t[1]))||null!=t[2])return!0;if(null!=t[3])te.unshift(t[3]);else if(null!=t[4]){if(("(?="===te[0]||"(?!"===te[0])&&")"!==t[4])return!0;te.shift()}}else if("]"===t[0])n(ee);else if(null!=t[1]||null!=t[2])return!0;return!1}function p(e){var n=e.source;if(null==n||"^"===n||"$"===n||"\\b"===n||"\\B"===n)throw new SyntaxError("Nothing to repeat: /"+(n||"(?:)")+"/");if(1===n.length||le.test(n)||q.U&&pe.test(n))return!1;if(!ae(e))return!0;if(/^\(\?<?[!=]/.test(n))throw new SyntaxError("Nothing to repeat: /"+n+"/");return!1}function d(e){var n=!1;return e.replace(de,function(e){if("["===e&&(n=!0),"]"===e){if(!n)return"\\]";n=!1}return n||"}"!==e?e:"\\}"})}function g(e){var n=e;return function(e){if("ref"===e.kind)J.hasRefs=J.hasFinalRef=!0;else if("regexp"===e.kind||"result"===e.kind){if(n>0&&fe(e)){J.hasRefs=!0;var r=!1;e.source=e.source.replace(oe,function(e,t){if(!r&&null!=t){var u=Number(t)+n;if(u>99)throw new RangeError("Too many back references");return"\\"+String(u)}return"["===e?r=!0:"]"===e&&(r=!1),e})}J.hasFinalRef=!!Y.get(e.key,"hasFinalRef"),n+=ie(e)}return J.captureCount=n,e}}function y(e){var n=e.source;if(q.U&&("regexp"===e.kind&&!e.key.unicode||"result"===e.kind&&!Y.get(e.key,"unicode"))){if(l(n))throw new SyntaxError("Can't upgrade the RegExp to Unicode /"+n+"/"+e.kind=="regexp"?e.key.flags:"");e.source=d(n)}var r=!1;return"regexp"===e.kind&&(e.key.dotAll||e.key.multiline)&&(e.source=n.replace(ge,function(n){return r?("]"===n&&(r=!1),n):("["===n&&(r=!0),e.key.dotAll&&"."===n?"[^]":e.key.multiline&&"^"===n&&G?"(?:^|(?<=[\\n\\r\\u2028\\u2029]))":e.key.multiline&&"$"===n&&G?"(?:$|(?=[\\n\\r\\u2028\\u2029]))":n)})),e}function h(e){var n=e.key.flags;if(!ye.test(n))throw new TypeError("Unkown flags: "+n.replace(new RegExp("["+z.join()+"]","g"),""));var r=!!e.key.unicode,t=e.key.ignoreCase,u=e.key.multiline;if(null!=q.I&&t!==q.I)throw new SyntaxError("Can't combine i and non-i regexps: "+e.key);if(!G&&null!=q.M&&t!==q.M)throw new SyntaxError("Can't combine m and non-m regexps: "+e.key);return q.I=t,q.M=u,q.U=q.U||r,e}function x(e){var n=Y.get(e.key,"direction");if(n*xe.current==-1)throw new TypeError("Illegal "+he[n]+" RegExp argument while building a "+he[xe.current]+" one: /"+e.source+"/");return 0!==n&&(J.hasRefs=!0),e}function k(e){return e?function(e,n){return e.source=null==e.source?n.source:n.source+"|"+e.source,e}:function(e,n){return e.source=null==e.source?n.source:n.source+("string"!==n.kind&&fe(n)&&Y.get(n.key,"hasFinalRef")&&/^\d/.test(e.source)?"(?:)":"")+e.source,e}}function w(){J={hasRefs:!1,hasFinalRef:!1,captureCount:0},q={U:!1,I:null,M:null}}function v(e){var n=J,r=q;try{return e()}finally{J=n,q=r}}function m(e,n){return n.condition&&!n.condition(e)||(e.source=n.wrapper[0]+(e.source||"")+n.wrapper[1]),n.suffix&&(e.source+=n.suffix),e}function b(e){return m(e,{condition:function(e){return("regexp"===e.kind||"result"===e.kind)&&ce(e)},wrapper:["(?:",")"]})}function R(e){if("number"==typeof e||"string"==typeof e)return{key:null,kind:"string",source:String(e).replace(ke,"\\$&")};throw new TypeError("Can't compose type "+typeof e+" as RegExp")}function E(e,r,t,u){return t=t||e.length>1,K.call(e,function e(u){return o(u)?x({key:u,kind:"ref",source:u()}):(!r&&t?b:n)(Array.isArray(u)?E(u,!1,t,0):"function"==typeof u?e(v(u)):u instanceof Q?x(h({key:u,kind:"regexp",source:a(u)})):R(u))}).map(y).map(g(u)).reduceRight(k(r),{key:Y.set(null,Object.assign({direction:J.hasRefs?xe.current:0,isDisjunction:r&&(e.length>1||1===e.length&&e[0]instanceof Q&&Y.get(e[0],"isDisjunction")),unicode:q.U},J)),kind:"result",source:null})}function S(){return(q.I?"i":"")+(G?"":q.M?"m":"")+(q.U?"u":"")}function O(e,n){n=n||{};var r=H.call(n,"flags")?n.flagsOp(S(),n.flags):S(),t=new RegExp(e.source||"",r);return Y.set(t,Y.set(e.key,{})),Y.set(t,"source",e.source),H.call(n,"direction")&&Y.set(t,"direction",n.direction),t}function $(){return arguments.length?(w(),O(E(arguments,!0,!1,0))):we}function I(){return E(arguments,!1,!1,0)}function j(){return arguments.length?(w(),O(I.apply(null,arguments))):we}function A(e,n,r){return function(){if(!arguments.length)return we;var t=xe.current;xe.current=r;try{w();return O(m(I.apply(null,arguments),{wrapper:[e,n]}),{direction:0})}finally{xe.current=t}}}function _(){return w(),O(m(Se.apply(I,arguments),{condition:p,wrapper:["(?:",")"],suffix:this}))}function C(e){"string"!=typeof e&&(e="{"+String(e)+"}");var n=e.match(Ee);if(!n||n[2]&&Number(n[2])<Number(n[1]))throw new SyntaxError("Invalid suffix '"+e+"'.");return 1===arguments.length?_.bind(e,e):_.apply(e,arguments)}function M(e){return!Z||re.test(r(e))}function D(e){var n=typeof e;return"string"===n&&M(e)||"number"===n&&0<e&&Math.round(e)===e}function F(e){if(!D(e))throw new SyntaxError("Bad ref: "+e);return"string"==typeof e?new RegExp("\\k<"+e+">"):Y.set(i(e),{direction:xe.current,hasFinalRef:!0,hasRefs:!0})}function U(){return w(),O(m(E(arguments,!1,!1,1),{wrapper:["(",")"]}))}function T(e){if("string"!=typeof e)throw new TypeError("String expected, got "+typeof e);return M(e),w(),O(m(E(L.call(arguments,1),!1,!1,1),{wrapper:["(?<"+e+">",")"]}))}function N(e){return 1===arguments.length?T.bind(null,e):T.apply(null,arguments)}function B(){return 1===xe.current?j(ve(U.apply(null,arguments)),F(1)):j(F(1),be(U.apply(null,arguments)))}function P(e,n){return e=e.split(""),n.split("").forEach(function(n){-1===e.indexOf(n)&&e.push(n)}),e.sort().join("")}function W(e){return w(),-1!==e.indexOf("u")&&(q.U=!0),O(Se.apply(I,arguments),{flagsOp:this,flags:e})}var z=[];"dgimsuy".split("").forEach(function(e){try{new RegExp("",e),z.push(e)}catch(e){}});var Z=-1!==z.indexOf("u"),G=!1;try{new RegExp("(?<=)"),G=!0}catch(e){}var q,J,H={}.hasOwnProperty,K=[].map,L=[].slice,Q=RegExp,V={value:void 0,writable:!1,enumerable:!1,configurable:!1},X={key:"__$$__compose_regexp__$$__"+t()+t()+t()+t(),set:function(e,n){var r=typeof e;if(null==e||"object"!==r&&"function"!==r)throw new TypeError("Bad WeakMap key");var t=e[X.key];if(!t)return V.value={keys:[this],values:[n]},Object.defineProperty(e,X.key,V),this;var u=t.keys.indexOf(this);return 0===u?(t.keys.push(this),t.values.push(n),this):(t.values[u]=n,this)},get:function(e){var n=e[X.key];if(n){var r=n.keys.indexOf(this);if(-1!==r)return n.values[r]}}},Y={set:function(e,n,r){var t=s(e);return"object"==typeof n?Object.assign(t,n):t[n]=r},get:function(e,n){return s(e)[n]}},ee=/\\u\d{4}|\\x\d{2}|\\k<(.*?)>|\\c[A-Za-z]|\\([^.?*+^$[\]\\(){}|\/DSWdswfnrtv])|\[\^\]|\.|[\[]|(\((?:\?[^])?)|(\)(?:[+?*]|\{\d+,?\d?\})?)/g,ne=/\\u\d{4}|\\x\d{2}|\\c[A-Za-z]|(\\[DSWdsw]-[^\]]|.-\\[DSWdsw])|\\([^.?*+^$[\]\\(){}|\/DSWdswfnrtv-])|[\]]/g,re=Z&&new RegExp("^[_$\\p{ID_Start}][$\\p{ID_Continue}]*","u"),te=[],ue=/\\[^]|\(\?[^<]|[\[\](]/g,ie=c("captureCount",function(e){var n,r=0;for(ue.lastIndex=0;n=ue.exec(e.source);)"("===n[0]&&(r+=1);return r}),oe=/\\[^1-9]|[\[\]]|\\(\d{1,2})/g,fe=c("hasRefs",function(e){var n,r=!1,t=!1,u=!1;for(oe.lastIndex=0;n=oe.exec(e.source);)u||null==n[1]?"["===n[0]?u=!0:"]"===n[0]&&(u=!1):(r=!0,oe.lastIndex===e.source.length&&(t=!0));return Y.set(e.key,"hasFinalRef",t),r}),se=/(\\.)|[-()|\[\]]((?=\?(?:=|!|<=|<!))?)/g,ce=c("isDisjunction",function(e){if(-1===e.source.indexOf("|"))return!1;var n,r=0,t=!1;for(se.lastIndex=0;n=se.exec(e.source);)if(null==n[1]&&(t||"("!==n[0]||r++,t||")"!==n[0]||r--,t||"["!==n[0]&&"[-"!==n[0]||(t=!0),t&&"]"===n[0]&&(t=!1),0===r&&!t&&"|"===n[0]))return!0;return!1}),ae=c("isOneGroupOrAssertion",function(e){var n=e.source;if("("!==n.charAt(0)||")"!==n.charAt(n.length-1))return!1;var r,t=0,u=!1;for(se.lastIndex=0;r=se.exec(n);)if(null==r[1]){if(u||"("!==r[0]||t++,!u&&")"===r[0]&&0===--t&&r.index!==n.length-1)return!1;u||"["!==r[0]&&"[-"!==r||(u=!0),u&&"]"===r[0]&&(u=!1)}else if(r.index===n.length-2)return!1;return!0}),le=/^\\[^]$|^\[(?:\\[^]|[^\]])*\]$/,pe=/^\\p\{[A-Z-a-z][A-Za-z=]*\}$/,de=/\{\d+,?\d*\}|\\[^]|\]|\[|\}/g,ge=/\\.|\.|\(\?:\^\|\(\?<=\[\\n\\r\\u2028\\u2029\]\)\)|\(\?:\$\|\(\?=\[\\n\\r\\u2028\\u2029\]\)\)|\[|\]|\^|\$/g,ye=new RegExp("^(?:(["+z.join("")+"])(?!.*\\1))*$"),he={"-1":"backward",1:"forward"},xe={current:1},ke=/[.?*+^$[\]\\(){}|]/g,we=/(?:)/,ve=A("(?=",")",1),me=A("(?!",")",1),be=A("(?<=",")",-1),Re=A("(?<!",")",-1),Ee=/^(?:\+|\*|\?|\{(\d+),?(\d*)\})\??$/,Se=_.call,Oe=C("?"),$e={add:function(e){if("string"!=typeof e)throw TypeError("String expected as first argument, got "+typeof e);if(!ye.test(e))throw new SyntaxError("Invalid flags: "+e);return 1===arguments.length?W.bind(P,e):W.apply(P,arguments)}};e.atomic=B,e.avoid=me,e.capture=U,e.either=$,e.flags=$e,e.lookAhead=ve,e.lookBehind=be,e.maybe=Oe,e.namedCapture=N,e.notBehind=Re,e.ref=F,e.sequence=j,e.suffix=C,Object.defineProperty(e,"__esModule",{value:!0})});
