/**@license MIT-compose-regexp.js-©Pierre-Yves Gérardy*/
!function(n,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define("compose-regexp",["exports"],e):(n="undefined"!=typeof globalThis?globalThis:n||self,e(n.composeRegexp={}))}(this,function(n){"use strict";function e(n){return n}function r(n){return"\\"+("number"==typeof n?String(n):"k<"+n+">")}function t(n){return Object.assign(r.bind(null,n),{ref:!0})}function u(n){return"function"==typeof n&&n.ref}function i(n){var e,r=!1;for(M.lastIndex=0;e=M.exec(n);){if("["===e[0]&&(r=!0),"]"===e[0]&&(r=!1),r&&null!=e[1]&&!N.test(e[1]))return!0;if(!r&&null!=e[1]&&!W.test(e[1]))return!0}return!1}function o(n){var e=!1;return n.replace(Z,function(n){if("["===n&&(e=!0),"]"===n){if(!e)return"\\]";e=!1}if(!e){if("}"===n)return"\\}";if("."===n)return"(?:(?![\\u{10000}-\\u{10ffff}]).)"}return n})}function f(){function n(i){z.call(i,function(i){if(Array.isArray(i)&&n(i),i instanceof P){var o=i.flags,f=-1!==o.indexOf("u"),l=o.replace("u","").split("").sort().join("");if(null!=u&&l!==u)throw new SyntaxError("Incompatible flags: '"+(u+t[t.length-1]?"u":"").split("").sort().join("")+"' and '"+o+"'");u=l,r.push(i.source),f?(t.push(!0),e=!0):t.push(!1)}})}var e=!1,r=[],t=[],u=null;C={getFlags:function(){return e?"u":""},check:function(){n(arguments)},setU:function(){e=!0},fixIfPossible:function(n){if(e){var u=r.indexOf(n.source);if(!t[u]){if(i(n.source))throw new SyntaxError("Can't upgrade the RegExp to Unicode "+n);return o(n.source)}}return n.source}}}function l(){var n=0;return function(e){if(u(e))return e();var r=0,t=!1,i=e.replace(G,function(e,u,i){if(!t&&("("===u&&(r+=1),null!=i)){var o=Number(i)+n;if(o>99)throw new RangeError("Too many back references");return"\\"+String(o)}return"["===u&&(t=!0),"]"===u&&(t=!1),e});return n+=r,i}}function a(n){var e=!1;return n.replace(G,function(n,r,t){if(!e&&null!=t){var u=Number(t)+1;if(u>99)throw new RangeError("Too many back references");return"\\"+String(u)}return"["===r&&(e=!0),"]"===r&&(e=!1),n})}function p(n){if(-1===n.indexOf("|"))return!1;var e,r=0,t=!1;for(H.lastIndex=0;e=H.exec(n);)if(null==e[1]&&(t||"("!==e[0]||r++,t||")"!==e[0]||r--,t||"["!==e[0]&&"[-"!==e[0]||(t=!0),t&&"]"===e[0]&&(t=!1),0===r&&!t&&"|"===e[0]))return!0;return!1}function c(n){return"string"==typeof n&&p(n)?"(?:"+n+")":n}function s(n){if("("!==n.charAt(0)||")"!==n.charAt(n.length-1))return!1;var e,r=0,t=!1;for(H.lastIndex=0;e=H.exec(n);)if(null==e[1]){if(t||"("!==e[0]||r++,!t&&")"===e[0]&&0===--r&&e.index!==n.length-1)return!1;t||"["!==e[0]&&"[-"!==e||(t=!0),t&&"]"===e[0]&&(t=!1)}else if(e.index===n.length-2)return!1;return!0}function g(n,e){return 1===n.length||J.test(n)||e&&K.test(n)||s(n)}function d(n){return L.test(n)}function h(n){if(u(n))return n;if(n instanceof P)return C.fixIfPossible(n);var e=typeof n;if("number"!==e&&"string"!==e)throw new TypeError("Can't compose type "+e+" as RegExp");return String(n).replace(Q,"\\$&")}function x(n,r,t){var i=n.length;return 0===i?"":B.call(n,function(n){return u(n)?n:(""!==r||1===i&&1===t?e:c)(Array.isArray(n)?x(n,"",i):h(n))}).map(l()).join(r)}function y(){return arguments.length?(f(),C.check.apply(null,arguments),new RegExp(x(arguments,"|",1),C.getFlags())):U}function w(){return C.check.apply(null,arguments),x(arguments,"",1)}function E(n,e){return function(){return arguments.length?(f(),new RegExp(n+w.apply(null,arguments)+e,C.getFlags())):U}}function v(n){if(1===arguments.length)return U;f();var e=tn.apply(w,arguments),r=C.getFlags();return new RegExp(g(e,-1!==r.indexOf("u"))?e+n:"(?:"+e+")"+n,r)}function m(n){if(!rn.test(n))throw new SyntaxError("Invalid suffix '"+n+"'.");return 1===arguments.length?v.bind(null,n):v.apply(null,arguments)}function b(n){var e=typeof n;return"string"===e&&d(n)||"number"===e&&n>0&&Math.round(n)===n}function R(n){if(!b(n))throw new TypeError("Bad ref");return t(n)}function S(){return arguments.length?(f(),new RegExp("("+a(w.apply(null,arguments))+")",C.getFlags())):new RegExp("()")}function I(n){if("string"!=typeof n)throw new TypeError("String expected, got "+typeof n);return d(n),arguments.length?(f(),new RegExp("(?<"+n+">"+a(tn.apply(w,arguments))+")",C.getFlags())):new RegExp("(<"+n+")")}function O(n){return 1===arguments.length?I.bind(null,n):I.apply(null,arguments)}function $(){return V(X(S.apply(null,arguments)),R(1))}function j(n,e){return n=n.split(""),e=e.split(""),e.forEach(function(e){-1===n.indexOf(e)&&n.push(e)}),n.sort().join("")}function T(n,e){return n=n.split(""),e=e.split(""),n.filter(function(n){return-1===e.indexOf(n)}).sort().join("")}function k(n){f(),-1!==n.indexOf("u")&&C.setU();var e=tn.apply(w,arguments);return new RegExp(e,j(n,C.getFlags()))}function A(n){if("string"!=typeof n)throw TypeError("String expected as first argument, got "+typeof n);if(!q.test(n))throw new SyntaxError("Invalid flags: "+n);return 1===arguments.length?k.bind(null,n):k.apply(null,arguments)}function F(n,e){if(arguments.length>2)throw new RangeError("flags."+this.name+"() expects at most two arguments");f();var r=e&&e.flags||"";-1!==n.indexOf("u")&&C.setU();var t=tn.apply(w,arguments);return new RegExp(t,j(this(r,n),C.getFlags()))}var _=[];"abcdefghijklmnopqrstuvwxyz".split("").forEach(function(n){try{new RegExp("",n),_.push(n)}catch(n){}});var C,D=-1!==_.indexOf("u"),U=new RegExp(""),z=[].forEach,B=[].map,P=RegExp,q=new RegExp("^["+_.join("")+"]*$"),M=/\\u\d{4}|\\x\d{2}|\\(.)|[\[\]]/g,N=/[.?*+^$[\]\\(){}|dDsSwW-]/,W=/[.?*+^$[\]\\(){}|dDsSwW]/,Z=/\{\d+,?\d*\}|\\.|]|\[|\}|\./g,G=/\\(?!\d).|\(\?[^<]|([\[\](])|\\(\d{1,2})/g,H=/(\\.)|[-()|\[\]]/g,J=/^\\[^]$|^\[(?:\\[^]|[^\]])*\]$/,K=/^\\p\{[A-Z-a-z][A-Za-z=]*\}$/,L=D&&new RegExp("^[_$\\p{ID_Start}][$\\p{ID_Continue}]*","u"),Q=/[.?*+^$[\]\\(){}|-]/g,V=E("",""),X=E("(?=",")"),Y=E("(?!",")"),nn=E("(?<=",")"),en=E("(?<!",")"),rn=/^(?:\+|\*|\?|\{(?=(\d+))\1(?=(,?))\2(?=(\d*))\3\})\??$/,tn=v.call,un=m("?");A.add=function(n){if("string"!=typeof n)throw TypeError("String expected as first argument, got "+typeof n);if(!q.test(n))throw new SyntaxError("Invalid flags: "+n);return 1===arguments.length?F.bind(j,n):F.apply(j,arguments)},A.remove=function(n){if("string"!=typeof n)throw TypeError("String expected as first argument, got "+typeof n);return 1===arguments.length?F.bind(T,n):F.apply(T,arguments)},n.atomic=$,n.avoid=Y,n.capture=S,n.either=y,n.flags=A,n.lookAhead=X,n.lookBehind=nn,n.maybe=un,n.namedCapture=O,n.notBehind=en,n.ref=R,n.sequence=V,n.suffix=m,Object.defineProperty(n,"__esModule",{value:!0})});
