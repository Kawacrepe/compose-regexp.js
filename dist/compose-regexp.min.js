/**@license MIT-compose-regexp.js-©Pierre-Yves Gérardy*/
!function(n,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define("compose-regexp",["exports"],e):e(n.composeRegexp={})}(this,function(n){"use strict";function e(n){return n}function r(n){var e,r=!1;for(W.lastIndex=0;e=W.exec(n);){if("["===e[0]&&(r=!0),"]"===e[0]&&(r=!1),r&&null!=e[1]&&!Z.test(e[1]))return!0;if(!r&&null!=e[1]&&!q.test(e[1]))return!0;if(null!=e[2])return!0}return!1}function t(n){var e=!1;return n.replace(G,function(n){if("["===n&&(e=!0),"]"===n){if(!e)return"\\]";e=!1}return e||"}"!==n?n:"\\}"})}function u(){function n(r){N.call(r,function(r){Array.isArray(r)&&n(r),r instanceof RegExp&&(u.push(r.source),-1!==r.flags.indexOf("u")?(i.push(!0),e=!0):i.push(!1))})}var e=!1,u=[],i=[];_={getFlag:function(){return e?"u":""},check:function(){n(arguments)},fixIfPossible:function(n){if(e){var o=u.indexOf(n.source);if(!i[o]){if(r(n.source))throw new TypeError("Can't upgrade the RegExp to Unicode "+n);return t(n.source)}}return n.source}}}function i(){var n=0;return function(e){if(m(e))return e();var r=0,t=!1,u=e.replace(L,function(e,u,i){if(!t&&("("===u&&(r+=1),null!=i)){var o=Number(i)+n;if(o>99)throw new RangeError("Too many back references");return"\\"+String(o)}return"["===u&&(t=!0),"]"===u&&(t=!1),e});return n+=r,u}}function o(n){var e=0,r=!1;return n.replace(L,function(n,t,u){if(!r&&("("===t&&(e+=1),null!=u)){var i=Number(u)+1;if(i>99)throw new RangeError("Too many back references");return"\\"+String(i)}return"["===t&&(r=!0),"]"===t&&(r=!1),n})}function f(n){if(-1===n.indexOf("|"))return!1;var e,r=0,t=!1;for(M.lastIndex=0;e=M.exec(n);)if(null==e[1]&&(t||"("!==e[0]||r++,t||")"!==e[0]||r--,t||"["!==e[0]&&"[-"!==e[0]||(t=!0),t&&"]"===e[0]&&(t=!1),0===r&&!t&&"|"===e[0]))return!0;return!1}function l(n){return"string"==typeof n&&f(n)?"(?:"+n+")":n}function p(n){if("("!==n.charAt(0)||")"!==n.charAt(n.length-1))return!1;var e,r=0,t=!1;for(M.lastIndex=0;e=M.exec(n);)if(null==e[1]){if(t||"("!==e[0]||r++,!t&&")"===e[0]&&0===--r&&e.index!==n.length-1)return!1;t||"["!==e[0]&&"[-"!==e||(t=!0),t&&"]"===e[0]&&(t=!1)}else if(e.index===n.length-2)return!1;return!0}function a(n,e){return 1===n.length||U.test(n)||e&&H.test(n)||p(n)}function c(n,r,t){var u=n.length;return 0===u?"":P.call(n,function(n){return m(n)?n:(!r||1===u&&1===t?e:l)(Array.isArray(n)?c(n,!0,u):g(n))}).map(i()).join(r?"":"|")}function g(n){if(m(n))return n;if(n instanceof RegExp)return _.fixIfPossible(n);var e=typeof n;if("number"!==e&&"string"!==e)throw new Error("unexpected type "+e);return String(n).replace(J,"\\$&")}function s(n){return K.test(n)}function h(){return arguments.length?(u(),_.check.apply(null,arguments),new RegExp(c(arguments,!1,1),_.getFlag())):z}function d(){return _.check.apply(null,arguments),c(arguments,!0,1)}function x(){return u(),new RegExp(d.apply(null,arguments),_.getFlag())}function y(n){if(1===arguments.length)return z;u();var e=V.apply(d,arguments),r=_.getFlag();return new RegExp(a(e,-1!==r.indexOf("u"))?e+n:"(?:"+e+")"+n,r)}function w(n){if(!Q.test(n))throw new Error("Invalid suffix '"+n+"'.");return 1===arguments.length?y.bind(null,n):y.apply(null,arguments)}function E(n){return"\\"+("number"==typeof n?String(n):"k<"+n+">")}function v(n){return Object.assign(E.bind(null,n),{ref:!0})}function m(n){return"function"==typeof n&&n.ref}function R(n){if("string"==typeof n&&s(n)||"number"==typeof n&&n>0&&Math.round(n)===n)return v(n);throw new TypeError("Bad ref")}function b(){return arguments.length?(u(),new RegExp("(?="+d.apply(null,arguments)+")",_.getFlag())):z}function F(){return arguments.length?(u(),new RegExp("(?!"+d.apply(null,arguments)+")",_.getFlag())):z}function k(){return arguments.length?(u(),new RegExp("(?<="+d.apply(null,arguments)+")",_.getFlag())):z}function O(){return arguments.length?(u(),new RegExp("(?<!"+d.apply(null,arguments)+")",_.getFlag())):z}function $(n,e){return n=n.split(""),e=e.split(""),e.forEach(function(e){-1===n.indexOf(e)&&n.push(e)}),n.sort().join("")}function A(n,e){return n=n.split(""),e=e.split(""),n.filter(function(n){return-1===e.indexOf(n)}).sort().join("")}function I(n){u(),-1!==n.indexOf("u")&&_.check(new RegExp("","u"));var e=V.apply(d,arguments);return new RegExp(e,$(n,_.getFlag()))}function S(n){return 1===arguments.length?I.bind(null,n):I.apply(null,arguments)}function T(n,e){if(arguments.length>2)throw new Error("flags."+this.name+"() expects at most two arguments");u();var r=e&&e.flags||"";-1!==n.indexOf("u")&&_.check(new RegExp("","u"));var t=V.apply(d,arguments);return new RegExp(t,$(this(r,n),_.getFlag()))}function j(){return arguments.length?(u(),new RegExp("("+o(d.apply(null,arguments))+")",_.getFlag())):new RegExp("()")}function C(n){if("string"!=typeof n)throw new TypeError("String expected, got "+typeof n);return s(n),arguments.length?(u(),new RegExp("(?<"+n+">"+o(V.apply(d,arguments))+")",_.getFlag())):new RegExp("(<"+n+")")}function D(n){return 1===arguments.length?C.bind(null,n):C.apply(null,arguments)}function B(){return x(b(j.apply(null,arguments)),R(1))}var _,z=new RegExp(""),N=[].forEach,P=[].map,W=/\\u\d{4}|\\x\d{2}|\\(.)|[\[\]]|(\.)/g,Z=/[.?*+^$[\]\\(){}|dDsSwW-]/,q=/[.?*+^$[\]\\(){}|dDsSwW]/,G=/\{\d+,?\d*\}|\\.|]|\[|\}/g,L=/\\(?!\d).|\(\?[^<]|([\[\](])|\\(\d{1,2})/g,M=/(\\.)|[-()|\[\]]/g,U=/^\\[^]$|^\[(?:\\[^]|[^\]])*\]$/,H=/^\\p\{[A-Z-a-z][A-Za-z=]*\}$/,J=/[.?*+^$[\]\\(){}|-]/g,K=/^[_$\p{ID_Start}][$\p{ID_Continue}]*/u,Q=x(/^/,h("+","*","?",/\{\d+,?\d*\}/),/\??$/),V=y.call;S.add=function(n){if("string"!=typeof n)throw TypeError("string expected as first argument, got "+typeof n);return 1===arguments.length?T.bind($,n):T.apply($,arguments)},S.remove=function(n){if("string"!=typeof n)throw TypeError("string expected as first argument, got "+typeof n);return 1===arguments.length?T.bind(A,n):T.apply(A,arguments)};var X=w("?");n.hasTopLevelChoice=f,n.isOneGroup=p,n.either=h,n.sequence=x,n.suffix=w,n.ref=R,n.lookAhead=b,n.avoid=F,n.lookBehind=k,n.notBehind=O,n.flags=S,n.capture=j,n.namedCapture=D,n.atomic=B,n.maybe=X});
